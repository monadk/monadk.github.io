---
title: "[TIL] 250611, MS AI RAG & Agent 구현"
excerpt: "Azure AI Search와 Azure OpenAI Embedding 모델을 활용한 RAG Chatbot"

categories:
  - TIL
tags:
  - [GenAI,Azure,AI,RAG,AIAgent,python]

permalink: /TIL/250611/

toc: true
toc_sticky: true

date: 2025-06-11T13:48:02+0900
last_modified_at: 2025-06-11T13:48:02+0900
---

1. Azure portal에서 Azure AI Search, Azure OpenAI 리소스를 생성한다.
(Azure AI Search와 Azure OpenAI 서비스를 함께 사용하려면, 해당 리소스가 **동일한 Region**에 있어야 한다.)
2. Azure OpenAI 리소스 > Azure AI Foundry 접속 > 모델 카탈로그에서 적절한 LLM, Text 임베딩모델을 생성한다. (역시 모두 동일한 Region에 있어야 함)
3. Azure Storage Account 생성 > blob storage에 임베딩할 데이터 업로드 
4. Azure AI Search 리소스 > "데이터 가져오기 및 벡터화" > Storage Account에 업로드된 데이터를 로드. (임베딩 모델은 앞서 생성한 모델을 사용)
5. Azure AI Search 리소스 > "인덱스" 에서 생성된 인덱스를 확인할 수 있다.

<br>

## 각 서비스별 역할 상세 설명
RAG(Retrieval Augmented Generation) 챗봇을 만들기 위해 Azure AI Search와 Azure OpenAI 서비스를 활용한다.

### 1. Azure AI Search (인덱싱)
- 데이터 수집 및 정제 : 문서 파일(pdf, word), 웹 페이지, DB 등 다양한 형태의 데이터를 Azure AI Search로 가져옴. 불필요한 내용 제거, 형식 통일 등의 전처리 작업이 이루어질 수 있다.<br>보통 Storage Account(blob storage 컨테이너)에 데이터를 업로드하고 이를 가져오도록 설정하여 주기적으로 인덱싱함) 
- 벡터 임베딩 저장 (Azure OpenAI Embedding 모델이 간접적으로 사용됨):
  - 원본 텍스트만 저장하는 것이 아니라 

### Work Flow
1. **사용자 질문**: 사용자가 Chatbot에 질문
2. 질문 벡터화 (Azure OpenAI Embedding model 사용)
3. 관련 문서 검색 (Azure AI Search): chatbot은 벡터화된 질문을 Azure AI Search에 보내, 미리
